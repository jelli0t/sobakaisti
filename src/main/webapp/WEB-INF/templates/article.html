<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="commons/mvt_head :: mvt_head(~{::title})">
	<title th:text="${post.title}">Literature</title>
	<!-- fb graf linkovi -->
</head>
<body>
<!-- <header th:replace="~{commons/mvt_header :: mvt_header}"></header> -->
<th:block th:insert="~{commons/mvt_header :: mvtTopNavigation}"></th:block>
<!-- Main Page Header -->
<th:block th:insert="~{commons/mvt_header :: mvtHeader}"></th:block>
	
<section>
	<div class="center-main-width fx-box fx-justify-cnt mvt-post-container">
		<article th:with="post=${post}" class="post">
			<!-- header of the article -->
			<header class="post-header">
				<h1 th:text="${post.title}" th:title="${post.title}" class="post-title"></h1>
				<!-- post details -->
				<div th:with="author=${post.author}" class="post-details">
					<!-- Author avatar -->
					<a th:href="@{/{url_basis}/by/{author}(url_basis=${URL_BASIS}, author=${author.slug})}" th:alt="${author.firstName + ' ' + author.lastName}">
						<span class="circle circle-post-author" th:text="${#strings.substring(author.firstName,0,1)}+'.'+${#strings.substring(author.lastName,0,1)}+'.'">SBK</span>
					</a>
					<!-- Author name -->
					<a th:href="@{/{url_basis}/by/{author}(url_basis=${URL_BASIS}, author=${author.slug})}" th:alt="${author.firstName + ' ' + author.lastName}" 
						th:text="${author.firstName + ' ' + author.lastName}" class="post-author-name">Sobakaisti</a>
					<!-- Post date -->
					<span>objavljeno dana</span>
					<time class="post-date" th:text="${#dates.format(post.postDate, 'dd. MMM yyyy.')}"></time>	
				</div>
			</header>
			<!-- featured image -->
<!-- 			<div th:if="${post.featuredImage != null}" class="post-img-container"> -->
<!-- 				<img alt="" th:src="@{/resources/img/{img}(img=${post.featuredImage})}" class="post-img"> -->
<!-- 			</div> -->
			<!-- fotka -->
		    <aside th:if="${post?.featuredImage != null}" th:with="media = ${post.featuredImage}" class="post-img-container"
		    	th:style="'background:url(' + @{/uploads/images/{filename}(filename=${media.fileName})} + ') no-repeat center center; background-size: contain;'">
		    </aside>

			<div class="post-body" th:utext="${post.content}"></div>
			
			<th:block th:if="${post instanceof T(org.sobakaisti.mvt.models.Publication) and post.media != null}">				
				<div th:with="media = ${post.media}">
					<a th:href="@{/uploads/images/{filename}(filename=${media.fileName})}" 
						class="show-media-lib bttn bttn-default" th:text="${media.title}" download>Download</a>
				</div>
			</th:block>
			<footer>
				<div class="post-tags"></div>
			</footer>
		</article>
	</div>
</section>	
	
<!-- 
*	Top Recomendation articles  *
-->
<section class="mvt-post-related">
	<div class="center-main-width fx-box fx-wrap fx-justify-sbtw mvt-postprev-container">
		<!-- top section header -->
		<div class="top-posts-header">
		    <span>Preporuï¿½ujemo</span>
		</div>
		<article class="fx-box fx-dir-col fx-justify-sbtw mvt-postprev-basic"
				th:each="rl_post, item : ${relatedPosts}" th:unless="${item.index > 2}">
		    <!-- fotka -->
		    <aside th:if="${rl_post?.featuredImage != null}" th:with="media = ${rl_post.featuredImage}" class="mvt-postprev-cover mvt-postprev-top-cover">
				<a th:href="@{/{url_basis}/{slug}(url_basis=${URL_BASIS}, slug=${rl_post.slug})}" th:title="${rl_post.title}"
				   th:style="'background:url(' + @{/uploads/images/{filename}(filename=${media.fileName})} + ') center center; background-size: cover;'"></a>
		    </aside>
			<!-- Right side of preview -->
			<div class="fx-box fx-grow2 fx-dir-col fx-justify-sbtw mvt-postprev-content">
				<header>
					<h3 class="mvt-postprev-title">
						<a th:href="@{/{url_basis}/{slug}(url_basis=${URL_BASIS}, slug=${rl_post.slug})}" th:title="${rl_post.title}" th:text="${rl_post.title}"></a>
					</h3>
				</header>
			    <div th:if="${rl_post.content != null}" th:utext="${#strings.abbreviate(rl_post.content, rl_post.featuredImage != null ? 145 : 300)}"
					class="mvt-postprev-snippet">
			    </div>
		    	<footer class="fx-box fx-dir-row fx-justify-sbtw" th:with="author=${rl_post.author}">
		    		<!--  -->
					<div class="fx-box"> 
			    		<!-- Authors avatar -->
						<div class="mvt-postprev-author-avatar">
							<a th:href="@{/{url_basis}/by/{author}(url_basis=${URL_BASIS}, author=${author.slug})}" th:alt="${author.firstName + ' ' + author.lastName}">
								<span class="circle circle-small" th:text="${#strings.substring(author.firstName,0,1)}+'.'+${#strings.substring(author.lastName,0,1)}+'.'">SBK</span>
							</a>
						</div>
						<!-- Authors full name and post date -->
						<div class="mvt-postprev-info">
							<span class="post-prev-author" th:title="${author.firstName + ' ' + author.lastName}">
								<a th:href="@{/{url_basis}/by/{author}(url_basis=${URL_BASIS}, author=${author.slug})}" 
									th:text="${author.firstName + ' ' + author.lastName}" th:alt="${author.firstName + ' ' + author.lastName}">Sobakaisti</a>
							</span>
							<time class="post-prev-date" th:text="${#dates.format(rl_post.postDate, 'dd. MMM yyyy. HH:mm')}"></time>
						</div>
					</div>	
			    	<div class="mvt-postprev-tools">
			            Tool
			        </div>				    
			</footer>
			</div>
		</article>
	</div>
</section>
	
	
	
	
<!-- Next an previous article -->

	<article th:if="${sideArticles != null && sideArticles[0] != null}" class="side-article-prev left-article-prev" th:with="article=${sideArticles[0]}">
		<a th:href="@{/arts/{art}/{slug}(art=${chosenArt.slug}, slug=${article.slug})}" id="side-post-link-next" class="side-post-overflow-link">&#xe687;</a>	
		<header>	
			<!-- Article title -->
			<a th:href="@{/arts/{art}/{slug}(art=${chosenArt.slug}, slug=${article.slug})}" 
				class="side-post-prev-title" th:text="${article.title}" th:alt="${article.title}" th:title="${article.title}"></a>
		</header>
		<div th:if="${article.content != null}" th:utext="${#strings.abbreviate(article.content, 110)}" class="side-post-prev-content"></div>
		<footer class="side-post-prev-footer" th:with="author=${article.author}" th:if="article.author != null">
			<div class="side-post-prev-author-details">
				<address class="post-prev-author" th:title="${author.firstName + ' ' + author.lastName}">
					<a th:href="@{/arts/{art}/by/{author}(art=${chosenArt.slug}, author=${author.slug})}" 
						th:text="${author.firstName + ' ' + author.lastName}" th:alt="${author.firstName + ' ' + author.lastName}">Sobakaisti</a>
				</address>
				<time class="post-prev-date" th:text="${#dates.format(article.postDate, 'dd. MMM yyyy.')}"></time>
			</div>
		</footer>
	</article>	

	<!-- right (next) post -->
	<article th:if="${sideArticles != null && sideArticles[1] != null}" class="side-article-prev right-article-prev" th:with="article=${sideArticles[1]}">
		<a th:href="@{/arts/{art}/{slug}(art=${chosenArt.slug}, slug=${article.slug})}" id="side-post-link-prev" class="side-post-overflow-link">&#xe685;</a>	
		<header>	
			<!-- Article title -->
			<a th:href="@{/arts/{art}/{slug}(art=${chosenArt.slug}, slug=${article.slug})}" 
				class="side-post-prev-title" th:text="${article.title}" th:alt="${article.title}" th:title="${article.title}"></a>
		</header>
		<div th:if="${article.content != null}" th:utext="${#strings.abbreviate(article.content, 110)}" class="side-post-prev-content"></div>
		<footer class="side-post-prev-footer" th:with="author=${article.author}" th:if="article.author != null">
			<div class="side-post-prev-author-details">
				<address class="post-prev-author" th:title="${author.firstName + ' ' + author.lastName}">
					<a th:href="@{/arts/{art}/by/{author}(art=${chosenArt.slug}, author=${author.slug})}" 
						th:text="${author.firstName + ' ' + author.lastName}" th:alt="${author.firstName + ' ' + author.lastName}">Sobakaisti</a>
				</address>
				<time class="post-prev-date" th:text="${#dates.format(article.postDate, 'dd. MMM yyyy.')}"></time>
			</div>
		</footer>
	</article>
	
<footer th:replace="~{commons/mvt_footer :: mvt_main_footer}"></footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" th:src="@{/resources/js/movement.jq.js}"></script>
</body>
</html>
